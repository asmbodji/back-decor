<input id="upload" type="file" />
<select id="style">
  <option value="moderne">Moderne</option>
  <option value="scandinave">Scandinave</option>
  <option value="minimaliste">Minimaliste</option>
  <option value="industriel">Industriel</option>
</select>
<button id="send">Envoyer</button>

<div id="results"></div>

<script>
document.getElementById('upload').addEventListener('change', async (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const style = "moderne"; // ou récupère depuis ta modale
  const formData = new FormData();
  formData.append('photo', file);
  formData.append('style', style);

  const res = await fetch('http://127.0.0.1:5000/api/decor', {
    method: 'POST',
    body: formData
  });

  const data = await res.json();
  console.log("Réponse backend:", data);

  if (data.status === "ok" && data.image) {
    document.getElementById("results").innerHTML = `
      <h3>Style: ${data.style}</h3>
      <img src="data:image/png;base64,${data.image}" 
           style="max-width:400px;border-radius:10px;"/>
    `;
  } else {
    document.getElementById("results").innerHTML = `
      <p>Erreur: ${data.error || "pas d'image reçue"}</p>
    `;
  }
});
</script>

